<!--
  ~  @license
  ~    Copyright 2016 Brigham Young University
  ~
  ~    Licensed under the Apache License, Version 2.0 (the "License");
  ~    you may not use this file except in compliance with the License.
  ~    You may obtain a copy of the License at
  ~
  ~        http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~    Unless required by applicable law or agreed to in writing, software
  ~    distributed under the License is distributed on an "AS IS" BASIS,
  ~    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~    See the License for the specific language governing permissions and
  ~    limitations under the License.
  -->

<!DOCTYPE html>
<html>

<head>
  <title></title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="load-components.js"></script>

  <script async src="lib/html-imports/html-imports.min.js"></script>

  <link rel="import" href="lib/iron-demo-helpers/demo-snippet.html">
  <link type="text/css" rel="stylesheet" href="//cloud.typography.com/75214/6517752/css/fonts.css" media="all" />
  <link rel="stylesheet" href="site.min.css">
  <style>
    code {
      display: block;
      background-color: #EEE;
      padding: 10px 15px;
      border: 1px solid #DDD;
      line-height: 150%;
    }
  </style>
</head>

<body>
  <byu-header>
    <span slot="site-title">Components Demo Site</span>
    <byu-menu slot="nav" collapsed>
      <a href="index.html">Home</a>
      <a href="byu-header.html">Header</a>
      <a href="byu-menu.html">Menu</a>
      <a class="selected" href="byu-search.html">Search</a>
      <a href="byu-user-info.html">User Info</a>
      <a href="byu-footer.html">Footer</a>
    </byu-menu>
    <byu-search slot="search"></byu-search>
  </byu-header>
  <h1>Search Demo</h1>

  <section style="margin: 20px">

    <p>Because each CMS has very different markup for its search box and because 
      web components only allow styling one level deep in the shadow DOM, you may
      need to add some custom CSS to get it looking right. Specifically, you'll
      need to hide any extra search buttons, then style the input tag, then use
      javascript so the search component submits your search form. We've provided
      examples in Drupal 7 and 8 and Wordpress, though the same principles
      will apply to every CMS.</p>

    <h1>Basic Search with HTML Input</h1>

    <script>
      function demoSearch(value) {
        console.log(value);
      }
    </script>

    <demo-snippet>
      <template>
        <byu-header>
          <span slot="site-title">Components Demo Site</span>
          <byu-search slot="search" onsearch="demoSearch"></byu-search>
        </byu-header>
      </template>
    </demo-snippet>

    In addition, you'll need the following Javascript:

    <pre><code>
    &lt;script&gt;
      function demoSearch(value) {
        console.log(value);
      }
    &lt;/script&gt;</code></pre>

    <h1>Drupal 7 Form (Simple)</h1>

    <script>
                                              function d7Search(value) {
                                                document.getElementById('search-submit').click();
                                              }
    </script>


    <demo-snippet>
      <template>

        <style type="text/css">
          #search-submit {
            display: none;
          }
          
          #basic-search #search {
            padding: 5px 10px;
            border: none;
          }
          
          .mobile-view #basic-search #search {
            padding: 5px 10px;
            width: 100%;
            height: 35px;
            border: none;
            border-bottom: 1px solid #c5c5c5;
          }
        </style>


        <byu-header>
          <span slot="site-title">Components Demo Site</span>
          <byu-search slot="search" onsearch="d7Search">
            <form action="/" method="post" id="basic-search" accept-charset="UTF-8">
              <div>
                <input id="search" type="search" name="search_block_form">
                <input id="search-submit" type="submit" value="Search">
                <input type="hidden" name="form_build_id" value="this was redacted">
                <input type="hidden" name="form_id" value="search_block_form">
              </div>
            </form>
          </byu-search>
        </byu-header>
      </template>
    </demo-snippet>

    In addition, you'll need the following Javascript:

    <pre><code>
    &lt;script&gt;
      function d7Search(value) {
        document.getElementById('search-submit').click();
      }
    &lt;/script&gt;</code></pre>


    <h1>Drupal 7 Form (Complex)</h1>
<p>Depending on which modules are in use, or if you have multiple search blocks 
  (i.e. one on a Search page, and one in the header), the id of your search submit input may change. 
  In this example, the id is "edit-submit--2". Inspect your block to find out what your id is.</p>

    <script>
                                              function d7SearchComplex(value) {
                                                document.getElementById('edit-submit--2').click();
                                              }
    </script>


    <demo-snippet>
      <template>

        <style type="text/css">
          byu-search .element-invisible {
            display: none;
          }
          
          byu-search .form-submit {
            display: none;
          }
          
          byu-search .form-item .custom-search-box {
            padding: 5px 10px;
            border: none;
            box-sizing: border-box;
          }
          
          byu-search .mobile-view .form-item .custom-search-box {
            padding: 5px 10px;
            width: 100%;
            height: 35px;
            border: none;
            border-bottom: 1px solid #c5c5c5;
          }
        </style>


        <byu-header>
          <span slot="site-title">Components Demo Site</span>
          <byu-search slot="search" onsearch="d7SearchComplex">
            <form class="search-form" role="search" action="/" method="post" id="search-block-form" accept-charset="UTF-8" target="_self"
              _lpchecked="1">
              <div>
                <div class="container-inline">
                  <h2 class="element-invisible">Search form</h2>
                  <div class="form-item form-type-textfield form-item-search-block-form">
                    <input title="Search for an event or topic." class="custom-search-box small-8 columns form-text" placeholder="Search" type="text"
                      id="edit-search-block-form--2" name="search_block_form" value="" size="15" maxlength="128">
                  </div>
                  <button class="secondary button radius postfix small-4 columns form-submit" id="edit-submit--2" name="op" value="GO" type="submit">GO</button>
                  <input class="custom-search-selector custom-search-types" type="hidden" name="custom_search_types" value="c-event">
                  <input type="hidden" name="form_build_id" value="form-DkpbtHaEIELKDqA_acBfeioWAvxnPaRu8hFd4wAfH-E">
                  <input type="hidden" name="form_token" value="749A0BeCwfMhMi8rw43YRgB9SNayzfAXcMNn3W9njWY">
                  <input type="hidden" name="form_id" value="search_block_form">
                </div>
              </div>
            </form>
          </byu-search>
        </byu-header>
      </template>
    </demo-snippet>

    In addition, you'll need the following Javascript:

    <pre><code>
    &lt;script&gt;
      function d7SearchComplex(value) {
        document.getElementById('edit-submit--2').click();
      }
    &lt;/script&gt;</code></pre>

    <h1>Drupal 8 Form</h1>

    <script>
                                              function d8Search(value) {
                                                document.getElementById('edit-submit').click();
                                              }
    </script>


    <demo-snippet>
      <template>

        <style type="text/css">
          .visually-hidden {
            display: none;
          }
          
          byu-search .form-submit {
            display: none;
          }
          
          byu-search .form-item .form-search {
            padding: 5px 10px;
            border: none;
            box-sizing: border-box;
          }
          
          byu-search .mobile-view .form-item .form-search {
            padding: 5px 10px;
            width: 100%;
            height: 35px;
            border: none;
            border-bottom: 1px solid #c5c5c5;
          }
        </style>

        <byu-header>
          <span slot="site-title">Components Demo Site</span>
          <byu-search slot="search" onsearch="d8Search">
            <form action="/drupal8/search/node" method="get" id="search-block-form" accept-charset="UTF-8" class="search-form search-block-form">
              <div class="js-form-item form-item js-form-type-search form-type-search js-form-item-keys form-item-keys form-no-label">
                <label for="edit-keys" class="visually-hidden">Search</label>
                <input title="Enter the terms you wish to search for." data-drupal-selector="edit-keys" type="search" id="edit-keys" name="keys"
                  value="" size="15" maxlength="128" class="form-search">
              </div>
              <div data-drupal-selector="edit-actions" class="form-actions js-form-wrapper form-wrapper" id="edit-actions">
                <input class="search-form__submit button js-form-submit form-submit" data-drupal-selector="edit-submit" type="submit" id="edit-submit"
                  value="Search">
              </div>
            </form>
          </byu-search>
        </byu-header>
      </template>
    </demo-snippet>

    In addition, you'll need the following Javascript:

    <pre><code>
    &lt;script&gt;
      function d8Search(value) {
        document.getElementById('edit-submit').click();
      }
    &lt;/script&gt;</code></pre>

    <h1>Wordpress Form</h1>

    <script>
      function wpSearch(value) {
        document.querySelector('.byu-ribbon__search__submit').click();
      }
    </script>

    <demo-snippet>
      <template>

        <style type="text/css">
         
          .byu-ribbon__search__submit {
            display: none;
          }
          
          .byu-ribbon__search .byu-ribbon__search__text-box {
            padding: 5px 10px;
            border: none;
            box-sizing: border-box;
          }
          
          .mobile-view .byu-ribbon__search .byu-ribbon__search__text-box {
            padding: 5px 10px;
            width: 100%;
            height: 35px;
            border: none;
            border-bottom: 1px solid #c5c5c5;
          }
        </style>

        <byu-header>
          <span slot="site-title">Components Demo Site</span>
          <byu-search slot="search" onsearch="wpSearch">
            <form class="byu-ribbon__search" action="https://brand-dev.byu.edu/google-cse" method="get" _lpchecked="1">
              <input class="byu-ribbon__search__text-box sm-hidden med-hidden mlg-hidden text-area" placeholder="Search" name="q">
              <input class="byu-ribbon__search__submit sm-hidden med-hidden mlg-hidden" type="submit" value="" name="submit">
            </form>
          </byu-search>
        </byu-header>
         </template>
    </demo-snippet>

    In addition, you'll need the following Javascript:

    <pre><code>
    &lt;script&gt;
      function wpSearch(value) {
        document.querySelector('.byu-ribbon__search__submit').click();
      }
    &lt;/script&gt;</code></pre>

  </section>
  <footer>
    <byu-footer></byu-footer>
  </footer>
</body>

</html>
